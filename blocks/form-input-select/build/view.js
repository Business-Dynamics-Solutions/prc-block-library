import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(l={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},t.d(r,l),r),{actions:n}=(0,o.store)("prc-block/form-input-select",{actions:{onOpen:()=>{(0,o.getContext)().isOpen=!0;const e=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");e&&e.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-up`)},onClose:(e=null)=>{null!==e&&e.preventDefault();const t=(0,o.getContext)();let n=!1;n||(n=!0,setTimeout((()=>{t.isOpen=!1,n=!1}),150));const l=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");l&&l.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-down`)},onReset:()=>{const e=(0,o.getContext)();e.activeIndex=0,e.value="",e.label="",e.filteredOptions=e.options},getOptionByValue:e=>{const t=(0,o.getContext)(),{options:n}=t,l=n.find((t=>t.value===e));return l?{index:n.findIndex((e=>e.value===l.value)),...l}:null},moveThroughOptions:(e,t)=>{const n=(0,o.getContext)(),{activeIndex:l,filteredOptions:r}=n;let i=null;i=null===l||isNaN(l)?0:l+e,i<0&&(i=r.length-1),i>=r.length&&(i=0);const c=t.parentElement.parentElement.querySelector(".wp-block-prc-block-form-input-select__list").querySelector(`[data-ref-value="${r[i].value}"]`);c&&c.scrollIntoView({block:"nearest"}),r.forEach((e=>{e.isSelected=!1})),r[i].isSelected=!0,n.activeIndex=i,n.filteredOptions=r},setValueOnEnter:()=>{const e=(0,o.getContext)(),{filteredOptions:t,activeIndex:l}=e,r=t[l];n.setNewValue(r?.value),e.label=r?.label,e.isOpen=!1},onKeyUp:e=>{e.preventDefault();const{value:t}=e.target,l=(0,o.getContext)(),{options:r}=l,{ref:i}=(0,o.getElement)();if("Escape"===e.key)return n.onReset(),void(!0===l.isOpen&&i.blur());if(40===e.keyCode&&"ArrowDown"===e.key)return void n.moveThroughOptions(1,e.target);if(38===e.keyCode&&"ArrowUp"===e.key)return void n.moveThroughOptions(-1,e.target);if("Enter"===e.key)return void n.setValueOnEnter();const c=r.filter((e=>{const{label:o}=e;return o.toLowerCase().includes(t.toLowerCase())}));c.length&&(l.filteredOptions=c)},onClick:e=>{e.preventDefault();const{ref:t}=(0,o.getElement)(),l=(0,o.getContext)(),{options:r,option:i}=l,c=(t.getAttribute("aria-controls"),t.getAttribute("data-ref-value")),{index:s}=n.getOptionByValue(c),{label:a,value:u}=r[s];l.activeIndex=s,l.label=a,n.setNewValue(u);const p=r;if(p.forEach((e=>{e.isSelected=!1})),p[s].isSelected=!0,l.filteredOptions=p,n.onClose(),l.hasClearIcon){const e=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");e&&e.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#xmark`)}},setNewValue:e=>{const{ref:t}=(0,o.getElement)(),n=(0,o.getContext)(),{targetNamespace:l}=n;if(n.value=e,e&&"prc-block/form-input-select"!==l){const{actions:n,state:r}=(0,o.store)(l);n.onSelectChange&&n.onSelectChange(e,t)}},onIconClick:()=>{const e=(0,o.getContext)(),{targetNamespace:t,isOpen:l,value:r}=e,{ref:i}=(0,o.getElement)();if(l||r)if(!l||r){if("prc-block/form-input-select"!==t&&!l&&r&&e.hasClearIcon){e.activeIndex=0,e.value="",e.label="",e.filteredOptions=e.options;const{actions:n}=(0,o.store)(t);n.onSelectClearIconClick&&n.onSelectClearIconClick(r,i);const l=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");l&&l.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-down`)}}else{n.onClose();const e=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");e&&e.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-down`)}else{n.onOpen();const e=i.nextElementSibling.querySelector("input");e&&e.focus();const t=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");t&&t.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-up`)}},getTargetProcessingState:()=>{const e=(0,o.getContext)(),{targetNamespace:t}=e;if("prc-block/form-input-select"!==t){const{state:e}=(0,o.store)(t);if(e.isProcessing)return!0}return!1}},callbacks:{isProcessing:()=>n.getTargetProcessingState(),isDisabled:()=>n.getTargetProcessingState(),onInit:()=>{const e=document.querySelector(".wp-block-prc-block-form-input-select__close-toggle use");e&&e.setAttribute("href",`${window.location.origin}/wp-content/plugins/prc-icon-library/build/icons/sprites/solid.svg#caret-down`)}}});var l,r;
//# sourceMappingURL=view.js.map