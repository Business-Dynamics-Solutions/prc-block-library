import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(i={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},r={},t.d(r,i),r),{actions:n,state:c}=(0,o.store)("prc-block/popup-controller",{state:{videos:{}},actions:{play:e=>{e&&!1!==c[e].api&&c[e].api.controls.play()},pause:e=>{e&&!1!==c[e].api&&c[e].api.controls.pause()},closeAll:()=>{Object.keys(c).forEach((e=>{c[e].isActive=!1,n.pause(e)}))},open:(e,t=!1)=>{if(console.log("open...",t),t)return c[t].isActive=!0,void n.play(t);const i=(0,o.getContext)(),r=i?.id;r&&(c[r].isActive=!0,n.play(r))},close:(e,t=!1)=>{if(t)return c[t].isActive=!1,void n.pause(t);const i=(0,o.getContext)(),r=i?.id;r&&(c[r].isActive=!1,n.pause(r))},openAndThen:e=>{const t=(0,o.getContext)(),{id:n}=t;c[n].isActive=!0,e()},closeAndThen:e=>{const t=(0,o.getContext)(),{id:n}=t;c[n].isActive=!1,e()}},callbacks:{onInit:()=>{const e=(0,o.getContext)(),{id:t}=e;window.prcPopupVideoPlayer||(window.prcPopupVideoPlayer={});const n=document.querySelector(".wp-block-prc-block-popup-modal__outer"),i=document.querySelector(".wp-site-blocks");if(i.parentNode.insertBefore(n,i),!t)return;const r=document.querySelector(`.wp-block-prc-block-popup-modal[data-controller-id="${t}"]`);if(!r)return;if(!r.classList.contains("is-video"))return;const s=r.querySelector(".jetpack-videopress-player");if(!s)return;const l=s.querySelector("iframe");if(!l)return;const{VideoPressIframeApi:p}=window,a=p(l,(()=>{a.customize.set({shareButton:!1})}));c[t].api=a,window.prcPopupVideoPlayer[t]=a},outerWatch:()=>{},onWindowClickCloseModal:e=>{const t=(0,o.getContext)(),{id:i}=t;if(!i)return;if(!c[i]?.isActive)return;const r=(0,o.getElement)(),{ref:s}=r;s.contains(e.target)&&!e.target.classList.contains("wp-block-prc-block-popup-modal__outer")||document.querySelector(".wp-block-prc-block-popup-modal.is-active").innerHTML.includes(e.target.innerHTML)||!0!==c[i].isActive||n.close(null,i)},onESCKey:e=>{const t=(0,o.getContext)(),{id:i}=t;i&&"Escape"===e.key&&!0===c[i].isActive&&(e.preventDefault(),n.close(null,i))},isModalActive:()=>{const e=(0,o.getContext)(),{id:t}=((0,o.getElement)(),e);return c[t]?.isActive},isAModalActive:()=>{(0,o.getElement)();const e=c;return Object.keys(e).some((e=>c[e].isActive))},soundOff:()=>{(0,o.getContext)(),(0,o.getElement)()}}});var i,r;
//# sourceMappingURL=view.js.map