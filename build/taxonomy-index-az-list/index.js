(()=>{"use strict";var e,t={979:(e,t,l)=>{const a=window.wp.blocks,n=window.wp.apiFetch;var o=l.n(n);const r=window.wp.element,i=window.wp.blockEditor,s=window.wp.components,c=window.wp.htmlEntities,u=window.prcComponents,d=window.ReactJSXRuntime;function p({value:e,onChange:t}){return(0,d.jsx)(s.SelectControl,{label:"Terms starting with letter",value:e,options:[{label:"(Click to select letter)",value:null},{label:"A",value:"A"},{label:"B",value:"B"},{label:"C",value:"C"},{label:"D",value:"D"},{label:"E",value:"E"},{label:"F",value:"F"},{label:"G",value:"G"},{label:"H",value:"H"},{label:"I",value:"I"},{label:"J",value:"J"},{label:"K",value:"K"},{label:"L",value:"L"},{label:"M",value:"M"},{label:"N",value:"N"},{label:"O",value:"O"},{label:"P",value:"P"},{label:"Q",value:"Q"},{label:"R",value:"R"},{label:"S",value:"S"},{label:"T",value:"T"},{label:"U",value:"U"},{label:"V",value:"V"},{label:"W",value:"W"},{label:"X",value:"X"},{label:"Y",value:"Y"},{label:"Z",value:"Z"}],onChange:e=>t(e)})}function x({value:e,onChange:t}){return(0,d.jsx)(u.TaxonomySelect,{value:e,onChange:t,allowMultiple:!0})}function m({attributes:e,setAttributes:t}){const{letter:l,taxonomy:a}=e;return(0,d.jsx)(i.InspectorControls,{children:(0,d.jsxs)(s.PanelBody,{title:"Taxonomy Query",children:[(0,d.jsx)(x,{value:a,onChange:e=>{t({taxonomy:[...e]})}}),(0,d.jsx)(s.CardDivider,{}),(0,d.jsx)(p,{value:l,onChange:e=>t({letter:e})})]})})}function b({children:e}){return(0,d.jsx)(s.Placeholder,{isColumnLayout:!0,icon:"networking",label:"Taxonomy Index A-Z Listing",children:(0,d.jsx)("div",{children:e})})}const v=window.prcIcons,h={from:[{type:"block",blocks:["prc-block/topic-index-az"],transform:e=>{const t=e;return t.exclude&&"string"==typeof t.exclude&&t.exclude.length>0&&(t.exclude=t.exclude.split(",")),Array.isArray(t.exclude)&&t.exclude.length>0&&(t.exclude=t.exclude.map((e=>parseInt(e,10)))),console.log("Transforming from topic-index-az to taxonomy-index-az-list, attributes: ",e," newAttributes: ",t),(0,a.createBlock)("prc-block/taxonomy-index-az-list",t)}}]},y=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/taxonomy-index-az-list","version":"0.1.0","title":"Taxonomy Index A-Z Listing","category":"theme","description":"A list of taxonomy terms sorted alphabeticaly. Select terms you want to exclude by checking the box.","keywords":["taxonomy","alphabetical"],"attributes":{"letter":{"type":"string"},"exclude":{"type":"array","default":[]},"taxonomy":{"type":"array","default":["category"]},"disableHeading":{"type":"boolean","default":false}},"supports":{"anchor":true,"align":false,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true,"__experimentalFontFamily":true,"__experimentalDefaultControls":{"fontSize":true,"__experimentalFontFamily":true}}},"textdomain":"taxonomy-index-az-list","editorScript":"file:./index.js","style":"file:./style-index.css"}'),{name:f}=y,g={icon:function(){return(0,d.jsx)(v.Icon,{icon:"arrow-up-a-z"})},edit:function({attributes:e,setAttributes:t}){const{letter:l,exclude:a,taxonomy:n}=e,[u,v]=(0,r.useState)(!1),h=(0,i.useBlockProps)();return(0,r.useEffect)((()=>{if(console.log("Setting the exclude map...",u),!1!==u){const e=u.filter((e=>!0===e.excluded)).map((e=>e.term_id));console.log("tmpExclude",e),t({exclude:e})}}),[u]),(0,r.useEffect)((()=>{((e,t)=>new Promise((l=>{o()({path:`/prc-api/v3/blocks/taxonomy-index-az-list/?letter=${e}&taxonomy=${t}`}).then((e=>{const t=e.map((e=>({name:e.name,term_id:e.term_id,excluded:!1})));l(t)}))})))(l,n).then((e=>{const t=a,l=e.map((e=>{console.log("Load Terms... s?",e);const l={...e};return t.includes(l.term_id)&&(l.excluded=!0),l}));v(l)}))}),[l,n]),(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)(m,{attributes:e,setAttributes:t}),(0,d.jsxs)("div",{...h,children:[void 0===l&&(0,d.jsxs)(b,{children:[(0,d.jsx)(x,{value:n,onChange:e=>{t({taxonomy:[...e]})}}),(0,d.jsx)(p,{value:l,onChange:e=>t({letter:e})})]}),void 0!==l&&(0,d.jsxs)(r.Fragment,{children:[(0,d.jsx)("h2",{children:l}),!1!==u&&(0,d.jsx)("ul",{children:u.map((e=>{const t=e.excluded,l=!0!==t?(0,c.decodeEntities)(e.name):`${(0,c.decodeEntities)(e.name)} (${e.term_id})`;return(0,d.jsx)("li",{children:(0,d.jsx)(s.CheckboxControl,{label:l,checked:t,onChange:t=>((e,t)=>{const l=u;l.map((l=>(l.term_id===t&&(l.excluded=!!e),l))),console.log("onSelect",[...l]),v([...l])})(t,e.term_id)})})}))})]})]})]})},transforms:h};(0,a.registerBlockType)(f,{...y,...g})}},l={};function a(e){var n=l[e];if(void 0!==n)return n.exports;var o=l[e]={exports:{}};return t[e](o,o.exports,a),o.exports}a.m=t,e=[],a.O=(t,l,n,o)=>{if(!l){var r=1/0;for(u=0;u<e.length;u++){l=e[u][0],n=e[u][1],o=e[u][2];for(var i=!0,s=0;s<l.length;s++)(!1&o||r>=o)&&Object.keys(a.O).every((e=>a.O[e](l[s])))?l.splice(s--,1):(i=!1,o<r&&(r=o));if(i){e.splice(u--,1);var c=n();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[l,n,o]},a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},a.d=(e,t)=>{for(var l in t)a.o(t,l)&&!a.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})},a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={5430:0,7853:0};a.O.j=t=>0===e[t];var t=(t,l)=>{var n,o,r=l[0],i=l[1],s=l[2],c=0;if(r.some((t=>0!==e[t]))){for(n in i)a.o(i,n)&&(a.m[n]=i[n]);if(s)var u=s(a)}for(t&&t(l);c<r.length;c++)o=r[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},l=self.webpackChunk_pewresearch_prc_block_library=self.webpackChunk_pewresearch_prc_block_library||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))})();var n=a.O(void 0,[7853],(()=>a(979)));n=a.O(n)})();
//# sourceMappingURL=index.js.map