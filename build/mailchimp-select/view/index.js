import*as e from"@wordpress/interactivity";var t={d:(e,a)=>{for(var s in a)t.o(a,s)&&!t.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:a[s]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const a=(s={getContext:()=>e.getContext,store:()=>e.store},r={},t.d(r,s),r);var s,r;const{state:c,actions:n}=(0,a.store)("prc-block/mailchimp-select",{actions:{subscribe:async e=>{const{NONCE:t}=(0,a.getContext)(),s=e.find((e=>["emailAddress","email"].includes(e.name)))?.value,r=e.find((e=>"captchaToken"===e.name))?.value,c=e.filter((e=>"checkbox"===e.type)).map((e=>e.value)),n=await async function({emailAddress:e,captchaToken:t=!1,interests:a=[],NONCE:s=!1}){const{apiFetch:r}=window.wp,{isURL:c,buildQueryString:n}=window.wp.url;return new Promise(((n,i)=>{if(!t)return i(new Error("We couldn't verify you're not a robot ðŸ¤–. Please try again."));const o=document.URL;if(!c(o))return i(new Error("Invalid url",o));r.use(r.createNonceMiddleware(s)),r({path:"/prc-api/v3/mailchimp/subscribe",method:"POST",data:{email:e,captcha_token:t,interests:a.join(","),api_key:"mailchimp-select",origin_url:o}}).then((e=>{e.success?n(e):i(e)})).catch((e=>{i(e)}))}))}({emailAddress:s,interests:c,captchaToken:r,NONCE:t}).then((e=>({status:"success",message:"You have been subscribed to the selected lists.",data:e}))).catch((e=>({status:"error",message:e.message,data:e})));return n}},callbacks:{}});
//# sourceMappingURL=index.js.map