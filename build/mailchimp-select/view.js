import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var r in n)t.o(n,r)&&!t.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(o={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store},s={},t.d(s,o),s),{state:r}=(0,n.store)("prc-block/mailchimp-select",{state:{},actions:{onInputChange:e=>{const{value:t}=e.target,o=(0,n.getContext)(),{ref:s}=(0,n.getElement)(),{id:c}=s;r[c].value=t,o.emailAddress=r[c].value},onButtonClick:e=>{const t=(0,n.getContext)(),{ref:r}=(0,n.getElement)(),{id:o}=r;t.captchaHidden=!1},onCheckboxClick:e=>{"LABEL"===e.target.tagName&&e.preventDefault();const t=(0,n.getContext)(),{ref:o}=(0,n.getElement)(),s=o.querySelector("input"),{id:c}=s,{checked:i,value:a,type:l}=r[c];r[c].checked=!i;const u=t.interests.indexOf(a);u>-1?t.interests.splice(u,1):t.interests.push(a)},onCheckboxMouseEnter:()=>{},onButtonMouseEnter:()=>{}},callbacks:{onInit:()=>{const{ref:e}=(0,n.getElement)(),t=(0,n.getContext)(),r=e.querySelector("input.wp-block-prc-block-form-input-text");r?.id&&(t.inputId=r?.id);const o=e.querySelector(".wp-element-button");o?.id&&(t.buttonId=o?.id)},onInputChange:()=>{const{emailAddress:e,buttonId:t}=(0,n.getContext)();r[t].isDisabled=!(e&&e.includes("@"))},onCaptchaVerify:()=>{const e=(0,n.getContext)(),{NONCE:t,captchaToken:r,captchaHidden:o}=e;if(o)return;if(!r)return;const{apiFetch:s}=window.wp,{isURL:c,buildQueryString:i}=window.wp.url,a=document.URL;if(!c(a))return new Error("Invalid url",a);s.use(s.createNonceMiddleware(t)),s({path:"/prc-api/v3/mailchimp/subscribe",method:"POST",data:{email:e.emailAddress,captcha_token:r,interests:e?.interests.join(","),api_key:"mailchimp-select",origin_url:a}}).then((t=>{e.isSuccess=!0})).catch((t=>{e.isError=!0}))},onSuccess:()=>{const e=(0,n.getContext)(),{isSuccess:t,buttonId:o,inputId:s}=e;null!==t&&(r[s].isSuccess=t,r[o].isSuccess=t,!0===t&&(r[o].text="Success"))},onError:()=>{const e=(0,n.getContext)(),{isError:t,buttonId:o,inputId:s}=e;null!==t&&(r[s].isError=t,r[o].isError=t,!0===t&&(r[o].text="Error"))}}});var o,s;
//# sourceMappingURL=view.js.map