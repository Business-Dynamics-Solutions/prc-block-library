import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(i={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,useEffect:()=>e.useEffect,useState:()=>e.useState},u={},t.d(u,i),u),{apiFetch:n}=window.wp,{addQueryArgs:s}=window.wp.url,{decodeEntities:a}=window.wp.htmlEntities,{state:r,actions:c}=(0,o.store)("prc-block/taxonomy-search",{actions:{doSearch:async(e,t,o=0)=>new Promise((r=>{const c={per_page:25};""!==t&&(c.taxonomy=t),""!==e&&(c.search=e),0!==o&&""!==o&&(c.parent_term_id=o);const i={method:"GET",path:s("/prc-api/v3/blocks/taxonomy-search",c)};n(i).then((e=>{const t=e.map((e=>({key:e.id,id:e.id,url:e.link,description:a(e.description),label:a(e.name)})));r(t)}))})),onInputFocus:e=>{(0,o.getContext)().isActive=!0},onInputBlur:e=>{const t=(0,o.getContext)();setTimeout((()=>{t.isActive=!1}),300)},onInputChange:e=>{const{value:t}=e.target,n=(0,o.getContext)(),{ref:s}=(0,o.getElement)(),{id:a}=s;r[a].value=t,n.searchValue=r[a].value}},callbacks:{showResults:()=>{const e=(0,o.getContext)();return e.results&&e.results.length>=1&&e.isActive},onSearchValueChange:()=>{const e=(0,o.getContext)(),{debouncedSearchValue:t}=e;t&&c.doSearch(t,e.taxonomy).then((t=>{e.results=t}))},debounceSearchValueChange:()=>{const e=(0,o.getContext)(),t=(e=>{const[t,n]=(0,o.useState)(e);return(0,o.useEffect)((()=>{const t=setTimeout((()=>{n(e)}),1e3);return()=>{clearTimeout(t)}}),[e,1e3]),t})(e.searchValue);t.length>2&&(e.debouncedSearchValue=t)},onEscKey:e=>{27===e.keyCode&&((0,o.getContext)().isActive=!1)}}});var i,u;
//# sourceMappingURL=view.js.map