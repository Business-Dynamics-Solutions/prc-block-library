(()=>{"use strict";const e=window.wp.blocks,a=window.wp.data,t=window.wp.blockEditor,o=window.wp.i18n,l=window.wp.element,i=window.wp.components,r=window.ReactJSXRuntime;function n({colors:e,clientId:a}){const i=(0,t.__experimentalUseMultipleOriginColorsAndGradients)(),n=(0,l.useMemo)((()=>{const{barColor:a,setBarColor:t,backgroundColor:l,setBackgroundColor:i,categoryLabelColor:r,setCategoryLabelColor:n}=e;return[{colorValue:a?.color,onColorChange:t,label:(0,o.__)("Bar Color")},{colorValue:l?.color,onColorChange:i,label:(0,o.__)("Bar Background")},{colorValue:r?.color,onColorChange:n,label:(0,o.__)("Category Label")}]}),[e]);return(0,r.jsx)(t.InspectorControls,{group:"color",children:(0,r.jsx)(t.__experimentalColorGradientSettingsDropdown,{settings:n,panelId:a,hasColorsOrGradients:!1,disableCustomColors:!1,__experimentalIsRenderedInSidebar:!0,...i})})}function s({attributes:e,setAttributes:a,colors:s,clientId:d}){const{maxWidth:b,maxValue:c,currentValue:u,showAxisLabel:g,axisLabel:x,barPadding:p,axisLabelMaxWidth:C,axisPadding:m,labelFormat:h,labelPositionDY:y,labelPositionDX:f}=e;return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)(t.InspectorControls,{children:[(0,r.jsx)(i.PanelBody,{title:(0,o.__)("Layout"),children:(0,r.jsx)(i.RangeControl,{label:(0,o.__)("Width"),withInputField:!0,min:0,max:640,value:parseInt(b,10),onChange:e=>a({maxWidth:parseInt(e,10)})})}),(0,r.jsxs)(i.PanelBody,{title:(0,o.__)("Data and Formatting"),children:[(0,r.jsx)(i.ToggleControl,{label:(0,o.__)("Show Category"),checked:g,onChange:()=>a({showAxisLabel:!g})}),(0,r.jsx)(i.TextControl,{label:(0,o.__)("Category"),value:x,disabled:!g,onChange:e=>a({axisLabel:e})}),(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Category Label Max Width"),value:C,disabled:!g,disableUnits:!0,disabledUnits:!0,onChange:e=>a({axisLabelMaxWidth:parseInt(e,10)})}),(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Category Padding"),value:m,disabled:!g,disableUnits:!0,disabledUnits:!0,onChange:e=>a({axisPadding:parseInt(e,10)})}),(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Bar Padding"),value:p,disabled:!g,disableUnits:!0,disabledUnits:!0,onChange:e=>a({barPadding:parseInt(e,10)})}),(0,r.jsxs)(i.Flex,{children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Current value"),value:u,disableUnits:!0,disabledUnits:!0,onChange:e=>a({currentValue:parseFloat(e)})})}),(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Maximum value"),value:c,disableUnits:!0,disabledUnits:!0,onChange:e=>a({maxValue:parseFloat(e)})}),(0,r.jsx)(i.FlexItem,{})]})]}),(0,r.jsxs)(i.PanelBody,{title:(0,o.__)("Labels"),children:[(0,r.jsx)(i.SelectControl,{label:(0,o.__)("Label format"),value:h,options:[{value:"fractional",label:"Fractional"},{value:"percentage",label:"Percentage"}],onChange:e=>{a({labelFormat:e})}}),(0,r.jsxs)(i.Flex,{children:[(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Label Position DX"),value:f,onChange:e=>a({labelPositionDX:parseInt(e,10)})})}),(0,r.jsx)(i.FlexItem,{children:(0,r.jsx)(i.__experimentalNumberControl,{label:(0,o.__)("Label Position DY"),value:y,onChange:e=>a({labelPositionDY:parseInt(e,10)})})})]})]})]}),(0,r.jsx)(n,{colors:s,clientId:d})]})}const d=window.prcChartBuilder,b=function({axisLabel:e,axisPadding:a,axisLabelMaxWidth:t,barColor:o,barPadding:l,backgroundColor:i,categoryLabelColor:n,currentValue:s,labelFormat:b,labelPositionDX:c,labelPositionDY:u,maxWidth:g,maxValue:x,showAxisLabel:p}){const C={...d.baseConfig,layout:{...d.baseConfig.layout,name:"progress-chart",parentClass:"wp-block-prc-block-progress-bar",type:"stacked-bar",orientation:"horizontal",theme:"light",width:g,height:40,padding:{top:0,bottom:0,left:p?a:0,right:0},horizontalRules:!1},metadata:{...d.baseConfig.metadata,active:!1},colors:[o,i],independentAxis:{...d.baseConfig.independentAxis,active:p,scale:"linear",dateFormat:"yyyy",domain:[0,x],domainPadding:50,offsetY:null,padding:50,tickCount:5,tickValues:null,tickFormat:null,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",customTickFormat:null,tickLabels:{...d.baseConfig.independentAxis.tickLabels,fontSize:12,padding:0,angle:0,dx:-5,dy:0,textAnchor:"end",verticalAnchor:"middle",fill:n,maxWidth:t},axisLabel:{...d.baseConfig.independentAxis.axisLabel,fontSize:12,padding:30,fill:"rgba(35, 31, 32,0.7)"},axis:{...d.baseConfig.independentAxis.axis,stroke:"#756f6b00"},ticks:{...d.baseConfig.independentAxis.ticks,stroke:"gray",size:0,strokeWidth:0},grid:{...d.baseConfig.independentAxis.grid,stroke:""}},dependentAxis:{...d.baseConfig.dependentAxis,active:!1,scale:"linear",padding:20,domain:[0,x],domainPadding:20,offsetX:null,showZero:!1,tickCount:5,tickValues:null,tickFormat:null,multiLineTickLabels:!1,multiLineTickLabelsBreak:1,abbreviateTicks:!1,abbreviateTicksDecimals:0,tickUnit:"",tickUnitPosition:"end",customTickFormat:null,tickLabels:{...d.baseConfig.dependentAxis.tickLabels,fontSize:12,padding:15,angle:0,dx:0,dy:0,textAnchor:"middle",verticalAnchor:"start",fill:"rgba(35, 31, 32,0.7)"},axisLabel:{...d.baseConfig.dependentAxis.axisLabel,fontSize:12,padding:30,fill:"rgba(35, 31, 32,0.7)"},ticks:{...d.baseConfig.dependentAxis.ticks,stroke:"gray",size:5,strokeWidth:0},axis:{...d.baseConfig.dependentAxis.axis,stroke:"#756f6a"},grid:{...d.baseConfig.dependentAxis.grid,stroke:""}},dataRender:{...d.baseConfig.dataRender,x:"x",y:"y",x2:null,y2:null,sortKey:"x",sortOrder:"none",categories:["currentValue","restOfBar"],xScale:"linear",yScale:"linear",xFormat:"yyyy",yFormat:"yyyy"},animate:{active:!1,duration:500},tooltip:{...d.baseConfig.tooltip,active:!1},legend:{active:!1},bar:{...d.baseConfig.bar,barPadding:l/100},labels:{...d.baseConfig.labels,active:!0,showFirstLastPointsOnly:!1,color:"black",fontWeight:200,fontSize:12,labelBarPosition:"inside",labelCutoff:0,labelCutoffMobile:0,labelPositionDX:c,labelPositionDY:u,pieLabelRadius:60,abbreviateValue:!1,toFixedDecimal:0,labelUnit:"",labelUnitPosition:"end",labelFormat:null,customLabelFormat:(e,a)=>"currentValue"===a?"fractional"===b?`${s}/${x}`:`${(s/x*100).toFixed(0)}%\t`:""}},m=[{x:e,currentValue:s,restOfBar:x-s}];return(0,r.jsx)(d.ChartBuilderWrapper,{config:C,data:m})},c=(0,a.createReduxStore)("prc-block/progress-bar",{reducer:(e={isCopied:!1,copiedStyles:{}},a)=>"COPY_LAYOUT_STYLES"===a.type?{...e,isCopied:!0,copiedStyles:a.payload}:e,actions:{copyLayoutStyles:e=>({type:"COPY_LAYOUT_STYLES",payload:e})},selectors:{getCopiedStylesStatus:e=>e.isCopied,getCopiedStyles:e=>e.copiedStyles}}),u=(0,o.__)("Copy layout"),g=(0,o.__)("Paste layout"),x=({children:e,attributes:o,setAttributes:n})=>{const{maxWidth:s,barColor:d,backgroundColor:b,categoryLabelColor:x,showAxisLabel:p,axisPadding:C,axisLabelMaxWidth:m,labelFormat:h,labelPositionDX:y,labelPositionDY:f}=o,k={maxWidth:s,barColor:d,backgroundColor:b,categoryLabelColor:x,showAxisLabel:p,axisPadding:C,axisLabelMaxWidth:m,labelFormat:h,labelPositionDX:y,labelPositionDY:f},{copyLayoutStyles:_}=(0,a.useDispatch)(c),L=(0,a.select)(c).getCopiedStylesStatus();return(0,r.jsxs)(l.Fragment,{children:[(0,r.jsxs)(t.BlockControls,{children:[(0,r.jsx)(i.ToolbarGroup,{children:(0,r.jsx)(i.ToolbarButton,{name:"copy-styles",label:u,title:u,onClick:()=>{_(k)},children:u})}),L&&(0,r.jsx)(i.ToolbarGroup,{children:(0,r.jsx)(i.ToolbarButton,{name:"paste-styles",label:g,title:g,onClick:()=>(()=>{const{getCopiedStyles:e}=(0,a.select)(c),t=e();console.log({styles:t}),n({...o,...t})})(),children:g})})]}),e]})},p=(0,t.withColors)({barColor:"color"},{backgroundColor:"color"},{categoryLabelColor:"color"})((function({attributes:e,setAttributes:a,clientId:o,barColor:l,setBarColor:i,backgroundColor:n,setBackgroundColor:d,categoryLabelColor:c,setCategoryLabelColor:u}){const g=(0,t.useBlockProps)();return(0,r.jsx)(x,{attributes:e,setAttributes:a,children:(0,r.jsxs)("div",{...g,children:[(0,r.jsx)(s,{attributes:e,setAttributes:a,colors:{barColor:l,setBarColor:i,backgroundColor:n,setBackgroundColor:d,categoryLabelColor:c,setCategoryLabelColor:u},clientId:o}),(0,r.jsx)(b,{...e,barColor:l.color,backgroundColor:n.color,categoryLabelColor:c.color})]})})})),C=window.prcIcons,m=JSON.parse('{"$schema":"https://schemas.wp.org/trunk/block.json","apiVersion":3,"name":"prc-block/progress-bar","version":"0.1.0","title":"Progress Bar","category":"media","icon":"chart-bar","keywords":["progress","bar","quiz","result","horizontal","chart"],"attributes":{"maxWidth":{"type":"number","default":"640"},"barColor":{"type":"string","default":"social-trends-teal"},"barPadding":{"type":"number","default":15},"backgroundColor":{"type":"string","default":"ui-beige-very-light"},"categoryLabelColor":{"type":"string","default":"text-color"},"maxValue":{"type":"number","default":100},"currentValue":{"type":"number","default":50},"showAxisLabel":{"type":"boolean","default":true},"axisLabel":{"type":"string","default":"Total"},"axisPadding":{"type":"number","default":60},"axisLabelMaxWidth":{"type":"number","default":60},"labelFormat":{"enum":["fractional","percentage"],"default":"fractional"},"labelPositionDX":{"type":"integer","default":-5},"labelPositionDY":{"type":"integer","default":4}},"supports":{"anchor":true,"html":false,"spacing":{"blockGap":true,"margin":["top","bottom"],"padding":true,"__experimentalDefaultControls":{"padding":true}},"typography":{"fontSize":true}},"example":{"attributes":{}},"textdomain":"progress-bar","editorScript":"file:./index.js","render":"file:./render.php","viewScript":"file:./view.js"}'),{name:h}=m,y={icon:function(){return(0,r.jsx)(C.Icon,{icon:"bars-progress"})},edit:p};(0,a.register)(c),(0,e.registerBlockType)(h,{...m,...y})})();
//# sourceMappingURL=index.js.map