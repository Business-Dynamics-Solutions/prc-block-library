import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(i={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope,withSyncEvent:()=>e.withSyncEvent},r={},t.d(r,i),r),{state:n,actions:l}=(0,o.store)("prc-block/carousel-controller",{state:{lastScrollY:0,scrollLocking:!1,bodyObj:null,hasEngaged:!1,scrollLockTimeout:null,wheelTimeout:null,get isInsideCover(){const{ref:e}=(0,o.getElement)();return null!==e.closest(".wp-block-cover")},get coverRef(){const{ref:e}=(0,o.getElement)();return e.closest(".wp-block-cover")},get isVertical(){return"vertical"===(0,o.getContext)().orientation},get track(){const{id:e}=(0,o.getContext)();return document.getElementById(e).querySelector(".prc-block-carousel-controller__track__inner")},get hasNextSlide(){const{slideIndex:e,count:t}=(0,o.getContext)();return e<t-1},get hasPreviousSlide(){const{slideIndex:e}=(0,o.getContext)();return e>0},get trackStyle(){const{containerMinHeight:e}=(0,o.getContext)();return`min-height: ${e}px;`},get isActive(){const{index:e,slideIndex:t}=(0,o.getContext)();return e===t}},actions:{navigateToSlide:e=>{const{track:t,isVertical:l}=n;(0,o.getContext)().slideIndex=e,t.scrollTo({[l?"top":"left"]:e*t.offsetWidth,behavior:"smooth"})},goToDot:()=>{const e=(0,o.getContext)(),{dot:t}=e,{index:n}=t;l.navigateToSlide(n)},goToNextSlide:()=>{const e=(0,o.getContext)(),{count:t,slideIndex:n}=e,i=t===n+1?0:n+1;l.navigateToSlide(i)},goToPreviousSlide:()=>{const e=(0,o.getContext)(),{slideIndex:t,count:n}=e,i=0===t?n-1:t-1;l.navigateToSlide(i)},resetCarousel:()=>{l.navigateToSlide(0)}},callbacks:{onInit:()=>{const{track:e}=n,t=(0,o.getContext)(),{orientation:l,count:i}=t,r=(e.querySelectorAll(".wp-block-prc-block-carousel-slide"),"vertical"===l);let c;n.bodyObj=document.body,e.addEventListener("scroll",(0,o.withScope)((0,o.withSyncEvent)((o=>{clearTimeout(c),c=setTimeout((()=>{const o=r?e.clientHeight:e.clientWidth,n=r?e.scrollHeight:e.scrollWidth,l=r?e.scrollTop:e.scrollLeft,c=n-o,s=c?l/c:0,a=Math.round(s*(i-1)),d=Math.max(0,Math.min(a,i-1));t.slideIndex=d}),10)})))),n.isInsideCover||(t.enabled=!0)},isDotActive:()=>{const e=(0,o.getContext)(),{attributes:t}=(0,o.getElement)(),n=parseInt(t["data-slide-index"],10);return e.slideIndex===n},onMouseEnter:(0,o.withSyncEvent)((()=>{const e=(0,o.getContext)();console.log("onMouseEnter::",e),e.isSelected=!0})),onMouseLeave:(0,o.withSyncEvent)((()=>{const e=(0,o.getContext)();console.log("onMouseLeave::",e),e.isSelected=!1})),onCoverFinalSideDisable:()=>{const{ref:e}=(0,o.getElement)(),t=(0,o.getContext)(),{slideIndex:n,count:l}=t;e.closest(".wp-block-cover")&&n===l-1&&(t.enabled=!1)},onCoverScroll:()=>{const{isInsideCover:e,coverRef:t}=n,i=(0,o.getContext)();if(e){const e=t.getBoundingClientRect(),r=e.bottom,c=e.top;c<=0&&r>0&&window.scrollY>n.lastScrollY&&!n.hasEngaged&&(i.enabled=!0,n.bodyObj.style.overflow="hidden",n.hasEngaged=!0,setTimeout((0,o.withScope)((()=>{n.bodyObj.style.overflow="auto"})),2e3)),(r<=0||c>=window.innerHeight)&&setTimeout((0,o.withScope)((()=>{n.hasEngaged=!1,l.resetCarousel()})),2e3),n.lastScrollY=window.scrollY}}}});var i,r;
//# sourceMappingURL=view.js.map