import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope},c={},t.d(c,r),c),{state:n,actions:l}=(0,o.store)("prc-block/carousel-controller",{state:{lastScrollY:0,scrollLocking:!1,bodyObj:null,hasEngaged:!1,scrollLockTimeout:null,get isInsideCover(){const{ref:e}=(0,o.getElement)();return null!==e.closest(".wp-block-cover")},get coverRef(){const{ref:e}=(0,o.getElement)();return e.closest(".wp-block-cover")},get isVertical(){return"vertical"===(0,o.getContext)().orientation},get track(){const{id:e}=(0,o.getContext)();return document.getElementById(e).querySelector(".prc-block-carousel-controller__track")}},actions:{navigateToSlide:e=>{const{track:t,isVertical:l}=n;(0,o.getContext)().slideIndex=e,t.scrollTo({[l?"top":"left"]:e*t.offsetWidth,behavior:"smooth"})},goToDot:()=>{const{attributes:e}=(0,o.getElement)(),t=parseInt(e["data-slide-index"],10);l.navigateToSlide(t)},goToNextSlide:()=>{const e=(0,o.getContext)(),{count:t,slideIndex:n}=e,r=Math.min(n+1,t-1);l.navigateToSlide(r)},goToPreviousSlide:()=>{const e=(0,o.getContext)(),{slideIndex:t}=e,n=Math.max(t-1,0);l.navigateToSlide(n)}},callbacks:{onInit:()=>{const e=(0,o.getContext)(),{ref:t}=(0,o.getElement)(),{orientation:l,count:r}=e;console.log(e);const c="vertical"===l;n.bodyObj=document.body;const i=t.querySelector(".prc-block-carousel-controller__track");let s;i.addEventListener("scroll",(0,o.withScope)((t=>{clearTimeout(s),s=setTimeout((()=>{const t=c?i.clientHeight:i.clientWidth,o=c?i.scrollHeight:i.scrollWidth,n=c?i.scrollTop:i.scrollLeft,l=o-t,s=l?n/l:0,a=Math.round(s*(r-1)),d=Math.max(0,Math.min(a,r-1));e.slideIndex=d}),10)}))),n.isInsideCover||(e.enabled=!0)},isDotActive:()=>{const e=(0,o.getContext)(),{attributes:t}=(0,o.getElement)(),n=parseInt(t["data-slide-index"],10);return e.slideIndex===n},onCoverScroll:()=>{const{isInsideCover:e,coverRef:t}=n,l=(0,o.getContext)();if(e){const e=t.getBoundingClientRect(),r=e.bottom,c=e.top;c<=0&&r>0&&window.scrollY>n.lastScrollY&&!n.hasEngaged&&(l.enabled=!0,n.bodyObj.style.overflow="hidden",n.hasEngaged=!0,setTimeout((0,o.withScope)((()=>{n.bodyObj.style.overflow="auto"})),2e3)),(r<=0||c>=window.innerHeight)&&(l.enabled=!1,setTimeout((0,o.withScope)((()=>{n.hasEngaged=!1})),2e3)),n.lastScrollY=window.scrollY}}}});var r,c;
//# sourceMappingURL=view.js.map