import*as e from"@wordpress/interactivity";var t={d:(e,o)=>{for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const o=(r={getContext:()=>e.getContext,getElement:()=>e.getElement,store:()=>e.store,withScope:()=>e.withScope,withSyncEvent:()=>e.withSyncEvent},i={},t.d(i,r),i),{state:n,actions:l}=(0,o.store)("prc-block/carousel-controller",{state:{lastScrollY:0,scrollLocking:!1,bodyObj:null,hasEngaged:!1,scrollLockTimeout:null,get isInsideCover(){const{ref:e}=(0,o.getElement)();return null!==e.closest(".wp-block-cover")},get coverRef(){const{ref:e}=(0,o.getElement)();return e.closest(".wp-block-cover")},get isVertical(){return"vertical"===(0,o.getContext)().orientation},get track(){const{id:e}=(0,o.getContext)();return document.getElementById(e).querySelector(".prc-block-carousel-controller__track")},get hasNextSlide(){const{slideIndex:e,count:t}=(0,o.getContext)();return e<t-1},get hasPreviousSlide(){const{slideIndex:e}=(0,o.getContext)();return e>0}},actions:{navigateToSlide:e=>{const{track:t,isVertical:l}=n;(0,o.getContext)().slideIndex=e,t.scrollTo({[l?"top":"left"]:e*t.offsetWidth,behavior:"smooth"})},goToDot:()=>{const e=(0,o.getContext)(),{dot:t}=e,{index:n}=t;l.navigateToSlide(n)},goToNextSlide:()=>{const e=(0,o.getContext)(),{count:t,slideIndex:n}=e,r=t===n+1?0:n+1;l.navigateToSlide(r)},goToPreviousSlide:()=>{const e=(0,o.getContext)(),{slideIndex:t,count:n}=e,r=0===t?n-1:t-1;l.navigateToSlide(r)},resetCarousel:()=>{l.navigateToSlide(0)}},callbacks:{onInit:()=>{const e=(0,o.getContext)(),{orientation:t,count:l}=e,r="vertical"===t;n.bodyObj=document.body;const{track:i}=n;let s;i.addEventListener("scroll",(0,o.withScope)((0,o.withSyncEvent)((t=>{clearTimeout(s),s=setTimeout((()=>{const t=r?i.clientHeight:i.clientWidth,o=r?i.scrollHeight:i.scrollWidth,n=r?i.scrollTop:i.scrollLeft,s=o-t,c=s?n/s:0,a=Math.round(c*(l-1)),d=Math.max(0,Math.min(a,l-1));e.slideIndex=d}),10)})))),n.isInsideCover||(e.enabled=!0)},isDotActive:()=>{const e=(0,o.getContext)(),{attributes:t}=(0,o.getElement)(),n=parseInt(t["data-slide-index"],10);return e.slideIndex===n},onCoverFinalSideDisable:()=>{const{ref:e}=(0,o.getElement)(),t=(0,o.getContext)(),{slideIndex:n,count:l}=t;e.closest(".wp-block-cover")&&n===l-1&&(t.enabled=!1)},onCoverScroll:()=>{const{isInsideCover:e,coverRef:t}=n,r=(0,o.getContext)();if(e){const e=t.getBoundingClientRect(),i=e.bottom,s=e.top;s<=0&&i>0&&window.scrollY>n.lastScrollY&&!n.hasEngaged&&(r.enabled=!0,n.bodyObj.style.overflow="hidden",n.hasEngaged=!0,setTimeout((0,o.withScope)((()=>{n.bodyObj.style.overflow="auto"})),2e3)),(i<=0||s>=window.innerHeight)&&setTimeout((0,o.withScope)((()=>{n.hasEngaged=!1,l.resetCarousel()})),2e3),n.lastScrollY=window.scrollY}}}});var r,i;
//# sourceMappingURL=view.js.map