{"version":3,"file":"core-query/index.js","mappings":"mBAAA,MAAM,EAA+BA,OAAW,GAAU,OCArBA,OAAW,GAAS,MCApBA,OAAW,GAAW,QCAtBA,OAAW,GAAQ,MCoGvDC,EAAAA,EAAAA,wBAAuB,aAhCK,CAC3BC,KAAM,8BACNC,MAAO,4BACPC,YAAa,uDACbC,WAAY,CACXC,UAAW,8BACXC,MAAO,CACNC,QAAS,GACTC,SAAU,OACVC,MAAO,OACPC,QAAS,OACTC,SAAS,EACTC,mBAAmB,GAEpBC,oBAAoB,GAErBC,gBAAiB,CAChB,QACA,WACA,SACA,SACA,YACA,SACA,WAEDC,SAAUA,EAAGT,WACLA,EAAMM,kBAEdI,YAxDkC,CAClC,CACC,qBACA,CAAC,EACD,CACC,CACC,uBACA,CACCC,UAAW,OACXC,UAAW,KACXC,aAAc,cAKlB,CACC,wBACA,CACCC,WAAW,KAuCbC,MAAO,CAAC,WAAY,c","sources":["webpack://@pewresearch/prc-block-library/external window [\"wp\",\"blocks\"]","webpack://@pewresearch/prc-block-library/external window [\"wp\",\"hooks\"]","webpack://@pewresearch/prc-block-library/external window [\"wp\",\"compose\"]","webpack://@pewresearch/prc-block-library/external window [\"wp\",\"data\"]","webpack://@pewresearch/prc-block-library/./src/core-query/publication-listing-query.js"],"sourcesContent":["const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"blocks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"hooks\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"compose\"];","const __WEBPACK_NAMESPACE_OBJECT__ = window[\"wp\"][\"data\"];","/**\n * WordPress Dependencies\n */\nimport { registerBlockVariation } from '@wordpress/blocks';\nimport { addFilter } from '@wordpress/hooks';\nimport { createHigherOrderComponent } from '@wordpress/compose';\nimport { useSelect } from '@wordpress/data';\n\n/**\n * Add html attributes for each responsiveContainerQuery attribute value on the core/group block.\n */\n// @TODO Disabling for now, this is really just visual and was introducing issues because it was saving thesea attributes.By introducing taxonomy preview in block-area-modules this will probably be less useful and can be removed.\n// addFilter(\n// \t'editor.BlockEdit',\n// \t`${BLOCKIDENTIFIER}-context-area-watcher`,\n// \tcreateHigherOrderComponent((BlockEdit) => {\n// \t\treturn (props) => {\n// \t\t\tconst { attributes, name, context, isSelected } = props;\n// \t\t\tconst namespace = attributes?.namespace;\n// \t\t\tif (BLOCKNAME !== name || namespace !== NAMESPACE) {\n// \t\t\t\treturn <BlockEdit {...props} />;\n// \t\t\t}\n// \t\t\tconst blockAreaContextPostIds = useSelect((select) => {\n// \t\t\t\treturn select('prc-platform/block-area-context').getPostIds();\n// \t\t\t});\n\n// \t\t\tconst tmpExclude = attributes.query?.exclude || [];\n// \t\t\t// @TODO: This only needs to be temporary nothing more...\n// \t\t\t// attributes.query.exclude = [\n// \t\t\t// \t...blockAreaContextPostIds,\n// \t\t\t// \t...tmpExclude,\n// \t\t\t// ];\n\n// \t\t\treturn <BlockEdit {...props} />;\n// \t\t};\n// \t}, 'withBlockAreaContextWatcher')\n// );\n\n\nexport default function registerPubListingQueryVariation() {\n\tconst PublicationListingTemplate = [\n\t\t[\n\t\t\t'core/post-template',\n\t\t\t{},\n\t\t\t[\n\t\t\t\t[\n\t\t\t\t\t'prc-block/story-item',\n\t\t\t\t\t{\n\t\t\t\t\t\timageSlot: 'left',\n\t\t\t\t\t\timageSize: 'A3',\n\t\t\t\t\t\tmetaTaxonomy: 'formats',\n\t\t\t\t\t},\n\t\t\t\t],\n\t\t\t],\n\t\t],\n\t\t[\n\t\t\t'core/query-pagination',\n\t\t\t{\n\t\t\t\tshowLabel: true,\n\t\t\t},\n\t\t],\n\t];\n\n\t/**\n\t * Publication Listing Query\n\t * Changes the default query to only include posts that are published and have a parent\n\t * also sets the default post types to post, short-read, fact-sheet, interactives, and quizzes.\n\t */\n\tconst pubListingVariation = {\n\t\tname: 'prc-block/pub-listing-query',\n\t\ttitle: 'Publication Listing Query',\n\t\tdescription: 'Query posts in the style of a \"Publication Listing\".',\n\t\tattributes: {\n\t\t\tnamespace: 'prc-block/pub-listing-query',\n\t\t\tquery: {\n\t\t\t\tperPage: 10,\n\t\t\t\tpostType: 'post',\n\t\t\t\torder: 'desc',\n\t\t\t\torderBy: 'date',\n\t\t\t\tinherit: true,\n\t\t\t\tisPubListingQuery: true,\n\t\t\t},\n\t\t\tenhancedPagination: true,\n\t\t},\n\t\tallowedControls: [\n\t\t\t'order',\n\t\t\t'taxQuery',\n\t\t\t'search',\n\t\t\t'author',\n\t\t\t'postCount',\n\t\t\t'sticky',\n\t\t\t'inherit',\n\t\t],\n\t\tisActive: ({ query }) => {\n\t\t\treturn query.isPubListingQuery;\n\t\t},\n\t\tinnerBlocks: PublicationListingTemplate,\n\t\tscope: ['inserter', 'transform'],\n\t};\n\n\tregisterBlockVariation('core/query', pubListingVariation);\n}\n"],"names":["window","registerBlockVariation","name","title","description","attributes","namespace","query","perPage","postType","order","orderBy","inherit","isPubListingQuery","enhancedPagination","allowedControls","isActive","innerBlocks","imageSlot","imageSize","metaTaxonomy","showLabel","scope"],"sourceRoot":""}