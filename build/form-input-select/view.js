import*as e from"@wordpress/interactivity";var t={d:(e,n)=>{for(var o in n)t.o(n,o)&&!t.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:n[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const n=(i={getContext:()=>e.getContext,store:()=>e.store,withSyncEvent:()=>e.withSyncEvent},s={},t.d(s,i),s),{state:o,actions:r}=(0,n.store)("prc-block/form-input-select",{state:{get activeIndex(){const e=(0,n.getContext)(),{id:t}=e;return t&&o[t]&&o[t].activeIndex||0},get isOpen(){const e=(0,n.getContext)(),{id:t}=e;return t&&o[t]&&o[t].isOpen||!1},get formField(){const e=(0,n.getContext)(),{id:t}=e;if(!t||!o[t])return{};const{name:r,label:i,value:s,required:a,placeholder:l,hidden:c,readonly:u,disabled:d,error:p,options:g}=o[t];return{name:r,label:i,value:s,required:a,placeholder:l,hidden:c,readonly:u,disabled:d,error:p,options:g}},get isInputRequired(){const e=(0,n.getContext)(),{id:t}=e;return t&&o[t]&&o[t].required||!1},get isInputDisabled(){const e=(0,n.getContext)(),{id:t}=e;return t&&o[t]&&o[t].isDisabled||!1},get inputId(){const e=(0,n.getContext)(),{id:t}=e;return!(!t||!o[t])&&t},get inputLabel(){const e=(0,n.getContext)(),{id:t}=e;return!(!t||!o[t])&&(o[t].label||"")},get inputValue(){const e=(0,n.getContext)(),{id:t}=e;return t&&o[t]&&o[t].value||""},get inputPlaceholder(){const e=(0,n.getContext)(),{id:t}=e;return!(!t||!o[t])&&(o[t].placeholder||"")},get hasValue(){const e=(0,n.getContext)(),{id:t}=e;return!(!t||!o[t]||!o[t].value)},get hasClearIcon(){const e=(0,n.getContext)(),{id:t,hasClearIcon:r}=e;return!(!t||!o[t]||!r||!o[t].value&&!searchTerm)},get inputOptions(){const e=(0,n.getContext)(),{id:t,searchTerm:r}=e;if(!t||!o[t])return[];let i=o[t].options||[];if(r&&r.length>0&&i){const e=i.filter((e=>e.label.toLowerCase().includes(r.toLowerCase())));e.length>0&&(i=e)}return i}},actions:{hoistValueToTargetState:(e,t)=>{const{state:r}=(0,n.store)(t);if(!r)return;const{formFields:i}=r;if(!i)return;let s=i.find((t=>t.id===e));if(!s)return;const a=o.formField;a&&(s={...s,...a},r.formFields=i.map((t=>t.id===e?s:t)))},onInputKeyDown:(0,n.withSyncEvent)((e=>{if(e.preventDefault(),"Enter"===e.key){const{activeIndex:e,id:t,targetNamespace:i}=(0,n.getContext)(),{inputOptions:s}=o,{label:a,value:l}=s[e];o[t].value=l,o[t].label=a,o[t].isOpen=!1,r.hoistValueToTargetState(t,i)}})),onInputKeyUp:(0,n.withSyncEvent)((e=>{const t=(0,n.getContext)(),{id:i}=t;t.searchTerm=e.target.value,o[i].isOpen||(o[i].isOpen=!0),40!==e.keyCode||"ArrowDown"!==e.key?38!==e.keyCode||"ArrowUp"!==e.key?"Escape"===e.key&&(o[i].isOpen=!1):r.moveThroughChoices(-1,e.target):r.moveThroughChoices(1,e.target)})),onLabelClick:(0,n.withSyncEvent)((e=>{const{id:t}=(0,n.getContext)(),o=document.getElementById(t);o&&o.focus()})),onInputClearButtonClick:(0,n.withSyncEvent)((e=>{const{id:t}=(0,n.getContext)(),{targetNamespace:i}=(0,n.getContext)();(0,n.getContext)().searchTerm="",o[t].value="",o[t].label="",o[t].isOpen=!1,r.hoistValueToTargetState(t,i)})),moveThroughChoices:(e,t)=>{const{inputOptions:r}=o,{activeIndex:i}=(0,n.getContext)();let s=null;s=null===i||isNaN(i)?0:i+e,s<0&&(s=r.length-1),s>=r.length&&(s=0);const a=r[s].value,l=t.parentElement.parentElement.querySelector(".wp-block-prc-block-form-input-select__list"),c=l.querySelector(`[data-ref-value="${a}"]`);if(c){const e=l.querySelector(".is-selected");e&&e.classList.remove("is-selected"),c.classList.add("is-selected"),c.scrollIntoView({block:"nearest"})}(0,n.getContext)().activeIndex=s},onInputOptionClick:(0,n.withSyncEvent)((e=>{e.preventDefault();const t=(0,n.getContext)(),{id:i,targetNamespace:s}=t,{value:a,label:l}=t.option;o[i].value=a,o[i].label=l,r.hoistValueToTargetState(i,s)})),onInputFocus:(0,n.withSyncEvent)((e=>{const t=(0,n.getContext)(),{id:r}=t;o[r]&&(o[r].isOpen=!0)})),onInputBlur:(0,n.withSyncEvent)((e=>{let t=!1;if(!t){t=!0;const e=(0,n.getContext)(),{id:r}=e;setTimeout((()=>{o[r]&&(o[r].isOpen=!1),t=!1}),150)}}))},callbacks:{}});var i,s;
//# sourceMappingURL=view.js.map