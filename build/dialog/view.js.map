{"version":3,"file":"dialog/view.js","mappings":"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","sources":["webpack://@pewresearch/prc-block-library/webpack/bootstrap","webpack://@pewresearch/prc-block-library/webpack/runtime/define property getters","webpack://@pewresearch/prc-block-library/webpack/runtime/hasOwnProperty shorthand","webpack://@pewresearch/prc-block-library/external module \"@wordpress/interactivity\"","webpack://@pewresearch/prc-block-library/./src/dialog/view.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var x = (y) => {\n\tvar x = {}; __webpack_require__.d(x, y); return x\n} \nvar y = (x) => (() => (x))\nconst __WEBPACK_NAMESPACE_OBJECT__ = x({ [\"getContext\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getContext), [\"getElement\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.getElement), [\"store\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.store), [\"withScope\"]: () => (__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__.withScope) });","/**\n * WordPress Dependencies\n */\nimport {\n\tstore,\n\tgetContext,\n\tgetElement,\n\twithScope,\n} from '@wordpress/interactivity';\n\n// VideoPress API Docs: https://github.com/Automattic/videopress-player-api-doc/blob/trunk/public-js-api.md\nconst { VideoPressIframeApi } = window;\n\nfunction addDialogIdToUrl(id) {\n\tconst url = new URL(window.location.href);\n\turl.searchParams.set('dialogId', id);\n\twindow.history.pushState({}, '', url);\n}\n\nfunction removeDialogIdFromUrl() {\n\tconst url = new URL(window.location.href);\n\turl.searchParams.delete('dialogId');\n\twindow.history.pushState({}, '', url);\n}\n\nconst { actions, state } = store('prc-block/dialog', {\n\tstate: {\n\t\tget id() {\n\t\t\tconst context = getContext();\n\t\t\treturn context?.id;\n\t\t},\n\t\tget type() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].type;\n\t\t},\n\t\tget activationTimerDuration() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].activationTimerDuration;\n\t\t},\n\t\tget animationDuration() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].animationDuration;\n\t\t},\n\t\tget dialogElement() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn document.getElementById(state[id].dialogElemId);\n\t\t},\n\t\tget widths() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].widths;\n\t\t},\n\t\tget isOpen() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].isOpen;\n\t\t},\n\t\tget isClosing() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].isClosing;\n\t\t},\n\t\tget isMobile() {\n\t\t\treturn 'mobile' === state.currentDevice;\n\t\t},\n\t\t// VideoPress Functionality (non-core)\n\t\tget isVideo() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn !!state[id].videoPressAPI;\n\t\t},\n\t\tget videoPressAPI() {\n\t\t\tconst { id } = getContext();\n\t\t\treturn state[id].videoPressAPI;\n\t\t},\n\t},\n\tactions: {\n\t\t/**\n\t\t * Helper function to close all open dialogs.\n\t\t * @param dialogType\n\t\t */\n\t\tcloseAll: (dialogType = null) => {\n\t\t\tObject.keys(state).forEach((key) => {\n\t\t\t\t// Check that state[key] is an object and has an isOpen property.\n\t\t\t\tif (\n\t\t\t\t\ttypeof state[key] !== 'object' ||\n\t\t\t\t\t!state[key].hasOwnProperty('isOpen') ||\n\t\t\t\t\t!state[key].hasOwnProperty('type')\n\t\t\t\t) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tconst id = key;\n\t\t\t\tif (dialogType && dialogType !== state[id].type) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tstate[id].isOpen = false;\n\t\t\t\tactions.pause(id);\n\t\t\t});\n\t\t},\n\t\t/**\n\t\t * This function is used entirely by dialog-trigger to open the dialog.\n\t\t * @param event\n\t\t */\n\t\tonClickOpen: (event) => {\n\t\t\t// We are hijacking all clicks on the trigger and any children to prevent the default click behavior.\n\t\t\tevent.preventDefault();\n\t\t\tconst { id } = state;\n\t\t\tactions.open(id);\n\t\t},\n\t\t/**\n\t\t * This function is used entirely by the close button in the dialog element.\n\t\t * @param event\n\t\t */\n\t\tonClickClose: (event) => {\n\t\t\tevent.preventDefault();\n\t\t\tconst { id } = state;\n\t\t\tactions.close(id);\n\t\t},\n\t\t/**\n\t\t * This function allows you to directly open a dialog by passing an id from another store, like so:\n\t\t * store('prc-block/dialog').actions.open('xyz123');\n\t\t * @param {*} passthroughId\n\t\t */\n\t\topen: (passthroughId = false) => {\n\t\t\t// Most interactions will pass an id through, but if not then fallback to state for id.\n\t\t\tlet id = passthroughId;\n\t\t\tif (!id) {\n\t\t\t\tid = state.id;\n\t\t\t}\n\t\t\t// Finally, if there is no id then we can't proceed and should exit early.\n\t\t\tif (!id) {\n\t\t\t\tconsole.error('No id found to open dialog.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstate[id].isOpen = true;\n\t\t\tstate[id].closingModal = false;\n\t\t\tif (!!state.videoPressAPI) {\n\t\t\t\tsetTimeout(\n\t\t\t\t\twithScope(() => {\n\t\t\t\t\t\tactions.play(id);\n\t\t\t\t\t}),\n\t\t\t\t\tstate[id].animationDuration\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This function allows you to directly close a dialog by passing an id from another store, like so:\n\t\t * store('prc-block/dialog').actions.close('xyz123');\n\t\t * @param {*} passthroughId\n\t\t */\n\t\tclose: (passthroughId = false) => {\n\t\t\tlet id = passthroughId;\n\t\t\tif (!id) {\n\t\t\t\tid = state.id;\n\t\t\t}\n\t\t\tif (!id) {\n\t\t\t\tconsole.error('No id found to close dialog.');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstate[id].isOpen = false;\n\t\t\tif (!!state[id].videoPressAPI) {\n\t\t\t\tactions.pause(id);\n\t\t\t}\n\t\t},\n\t\t// VideoPress Functionality (non-core)\n\t\tplay: (id) => {\n\t\t\t// These are direct id state calls instead of derived state because when calling play directly we want to be explicit about which video dialog we're targeting.\n\t\t\t// Sanity Checks:\n\t\t\tif (!id || !state[id].videoPressAPI) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstate[id].videoPressAPI.controls.play();\n\t\t},\n\t\tpause: (id) => {\n\t\t\t// Sanity Checks:\n\t\t\tif (!id || !state[id].videoPressAPI) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tstate[id].videoPressAPI.controls.pause();\n\t\t},\n\t},\n\tcallbacks: {\n\t\tgetStyle: () => {\n\t\t\tconst { widths, currentDevice, animationDuration } = state;\n\t\t\tif (!widths[currentDevice]) {\n\t\t\t\treturn '';\n\t\t\t}\n\t\t\tconst width = widths[currentDevice];\n\t\t\treturn `--min-width: ${width}px; --animation-duration: ${animationDuration}ms;`;\n\t\t},\n\t\t/**\n\t\t * When the block initializes we need to capture the id of the dialog element and store it in state, this is later used by derived state.dialogElement. This is better than querying the dom every single time state.dialogElm is accessed.\n\t\t */\n\t\tonInitIdentifyDialogElem: () => {\n\t\t\tconst { id } = state;\n\t\t\tconst { ref } = getElement();\n\t\t\tconst dialog = ref.querySelector(\n\t\t\t\t'.wp-block-prc-block-dialog-element'\n\t\t\t);\n\t\t\tconst dialogId = dialog?.getAttribute('id');\n\t\t\tstate[id].dialogElemId = dialogId;\n\t\t\tconsole.log('OnInit', state);\n\t\t},\n\t\tonESCKey: (event) => {\n\t\t\tconst { id, isOpen } = state;\n\t\t\tif (id && event.key === 'Escape') {\n\t\t\t\tif (true === isOpen) {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tactions.close(id);\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tonOpen: () => {\n\t\t\tconst { dialogElement, isOpen, id, type } = state;\n\t\t\t// Sanity check, if we don't have an id or dialogElement then we can't proceed.\n\t\t\tif (!id || !dialogElement) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If the dialog is meant to not be open, don't proceed.\n\t\t\tif (!isOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\taddDialogIdToUrl(id);\n\t\t\tif ('modal' === type) {\n\t\t\t\tdialogElement.showModal();\n\t\t\t} else {\n\t\t\t\tdialogElement.show();\n\t\t\t}\n\t\t},\n\t\t/**\n\t\t * This callback is used to close the dialog element, it runs when the isOpen state changes and is set to false.\n\t\t */\n\t\tonClose: () => {\n\t\t\tconsole.log('running dialog onClose');\n\t\t\tconst { dialogElement, isOpen, id, animationDuration } = state;\n\t\t\t// Sanity check, if we don't have an id or dialogElement then we can't proceed.\n\t\t\tif (!id || !dialogElement) {\n\t\t\t\tconsole.log('onClose -> no id or dialogElement');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// If the dialog is meant to be open, don't proceed.\n\t\t\tif (isOpen) {\n\t\t\t\tconsole.log('onClose -> isOpen');\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Start isClosing animation...\n\t\t\tstate[id].isClosing = true;\n\t\t\t// Allow for animation to complete...\n\t\t\tsetTimeout(\n\t\t\t\twithScope(() => {\n\t\t\t\t\tdialogElement.close();\n\t\t\t\t\tremoveDialogIdFromUrl(id);\n\t\t\t\t\t// Fire off a custom event like prc-block-dialog-closed to let other blocks know the dialog has closed.\n\t\t\t\t\tconst event = new CustomEvent('prc-block-dialog-closed', {\n\t\t\t\t\t\tdetail: { id },\n\t\t\t\t\t});\n\t\t\t\t\tconsole.log('I have fired the event', event);\n\t\t\t\t\tdocument.dispatchEvent(event);\n\t\t\t\t\tstate[id].isClosing = false;\n\t\t\t\t}),\n\t\t\t\tanimationDuration\n\t\t\t);\n\t\t},\n\t\t/**\n\t\t * This function is used to determine the current device size and set the state accordingly, it runs against all block instances globally.\n\t\t */\n\t\tonResize: () => {\n\t\t\tconst width = document.documentElement.clientWidth;\n\t\t\tif (width <= 600) {\n\t\t\t\tstate.currentDevice = 'mobile';\n\t\t\t} else if (width > 600 && width <= 782) {\n\t\t\t\tstate.currentDevice = 'tablet';\n\t\t\t} else {\n\t\t\t\tstate.currentDevice = 'desktop';\n\t\t\t}\n\t\t},\n\t\tonBackdropClick: (event) => {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst boundingRects = ref.getBoundingClientRect();\n\t\t\t// make sure the event x and y are within the dialog element, if they are continue...\n\t\t\tif (\n\t\t\t\tevent.clientX >= boundingRects.left &&\n\t\t\t\tevent.clientX <= boundingRects.right &&\n\t\t\t\tevent.clientY >= boundingRects.top &&\n\t\t\t\tevent.clientY <= boundingRects.bottom\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (true !== state.isOpen) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { id } = state;\n\t\t\tconsole.log('onBackdropClick -> close', event, ref, state, id);\n\t\t\tactions.close(id);\n\t\t},\n\t\tonAutoActivation: () => {\n\t\t\tconst { id, activationTimerDuration } = state;\n\t\t\tconsole.log('onAutoActivation', id, activationTimerDuration, state);\n\t\t\tif (!id || !activationTimerDuration) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (1 <= activationTimerDuration) {\n\t\t\t\tsetTimeout(\n\t\t\t\t\twithScope(() => {\n\t\t\t\t\t\tconsole.log('onAutoActivation -> closeAll', id);\n\t\t\t\t\t\tactions.closeAll('modal');\n\t\t\t\t\t\tactions.open(id);\n\t\t\t\t\t}),\n\t\t\t\t\tactivationTimerDuration\n\t\t\t\t);\n\t\t\t}\n\t\t},\n\t\t// VideoPress Functionality (non-core)\n\t\t/**\n\t\t * This functions sets up a VideoPress API instance for each VideoPress block in a modal.\n\t\t * This will allow for the VideoPress API to be used to control the video playback.\n\t\t * This is called whenever a dialog block is initialized, but quickly checks for the existence of a VideoPress block and corresponding iframe before proceeding.\n\t\t */\n\t\tonVideoPressInit: () => {\n\t\t\tconst { ref } = getElement();\n\t\t\tconst hasVideoPress = ref.querySelector(\n\t\t\t\t'.jetpack-videopress-player'\n\t\t\t);\n\t\t\tif (!hasVideoPress) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst iframe = hasVideoPress.querySelector('iframe');\n\t\t\tif (!iframe) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// Because the VideoPress block is on the page the VideoPressIframeApi should be available, access it from window global, we import this (if available) at the top of the file. If(when) a VideoPress JS module becomes available, we'll use that.\n\t\t\tif (!VideoPressIframeApi) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tconst { id } = state;\n\t\t\t// Set up the VideoPress API object and also set it to turn off shareButton's by default.\n\t\t\tstate[id].videoPressAPI = VideoPressIframeApi(iframe, () => {\n\t\t\t\tapi.customize.set({ shareButton: false });\n\t\t\t});\n\t\t},\n\t},\n});\n"],"names":["__webpack_require__","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","y","__WEBPACK_EXTERNAL_MODULE__wordpress_interactivity_8e89b257__","x","d","VideoPressIframeApi","window","actions","state","store","id","context","getContext","type","activationTimerDuration","animationDuration","dialogElement","document","getElementById","dialogElemId","widths","isOpen","isClosing","isMobile","currentDevice","isVideo","videoPressAPI","closeAll","dialogType","keys","forEach","pause","onClickOpen","event","preventDefault","open","onClickClose","close","passthroughId","closingModal","setTimeout","withScope","play","console","error","controls","callbacks","getStyle","onInitIdentifyDialogElem","ref","getElement","dialog","querySelector","dialogId","getAttribute","log","onESCKey","onOpen","url","URL","location","href","searchParams","set","history","pushState","addDialogIdToUrl","showModal","show","onClose","delete","removeDialogIdFromUrl","CustomEvent","detail","dispatchEvent","onResize","width","documentElement","clientWidth","onBackdropClick","boundingRects","getBoundingClientRect","clientX","left","right","clientY","top","bottom","onAutoActivation","onVideoPressInit","hasVideoPress","iframe","api","customize","shareButton"],"sourceRoot":""}