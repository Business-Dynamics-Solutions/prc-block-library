import*as t from"@wordpress/interactivity";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(t,e)=>Object.prototype.hasOwnProperty.call(t,e)};const o=(r={getContext:()=>t.getContext,getElement:()=>t.getElement,store:()=>t.store},s={},e.d(s,r),s),{actions:n,state:c}=(0,o.store)("prc-block/table-of-contents",{actions:{getInternalChaptersList:()=>{const{ref:t}=(0,o.getElement)();return t.querySelector(".wp-block-prc-block-table-of-contents__list .is-top-level")?t.querySelector(".wp-block-prc-block-table-of-contents__list"):t.querySelector(".wp-block-prc-block-table-of-contents__list .wp-block-prc-block-table-of-contents__list")},initSmoothScrollClickHandler:()=>{const t=n.getInternalChaptersList();if(!t)return;const e=t.querySelectorAll("a");e&&e.forEach((t=>{t.addEventListener("click",(e=>{const o=t.getAttribute("href");if(0===o.indexOf("#")){const t=document.getElementById(o.replace("#",""));t&&(t.scrollIntoView({behavior:"smooth"},!0),console.log("smooth scroll to",o),window.history.pushState(null,null,o))}}))}))},onDropdownClick:t=>{t.preventDefault();const e=(0,o.getContext)();e.isDropdownOpen=!e.isDropdownOpen},getContextClue:t=>!t.part||t.chapter||t.section?t.chapter&&!t.section?"chapter":t.section?"section":void 0:"part"},callbacks:{mapFoundSectionsToChapters:()=>{const{sectionsFound:t,postId:e,partsEnabled:n}=c;if(!t)return;const r=Object.entries(t).map((([t,e])=>({key:t,label:e,url:`#${t}`,items:[],chapters:[],is_active:!1}))),{items:s}=(0,o.getContext)(),i=s.findIndex((t=>t.key===`unattachedPackagePart_${e}`));if(-1!==i)s[i].sections=r;else if(n){const t=s.findIndex((t=>t.chapters.find((t=>!0===t.is_active)))),e=s[t].chapters.findIndex((t=>!0===t.is_active));s[t].chapters[e].sections=r}else{const t=s.findIndex((t=>!0===t.is_active));s[t].sections=r}},hasListItems(){const t=(0,o.getContext)();console.log("hasListItems::",{...t});const{part:e,chapter:n}={...t};return void 0===n&&void 0!==e?e.sections.length>0:void 0!==n&&n.sections.length>0},isActive(){const t=(0,o.getContext)(),{part:e,chapter:c,section:r}={...t},s=n.getContextClue(t);return console.log("isActive::",s,{...t}),"part"===s?e.is_active:"chapter"===s?c.is_active:"section"===s&&r.is_active},onResizeToggleDropdown:()=>{const t=(0,o.getContext)(),{autoDropdownEnabled:e,autoDropdownWidth:n}=t;if(!e)return;const{ref:c}=(0,o.getElement)(),r=c.offsetWidth;t.isDropdown=!!(r<n&&e)},onWindowClickCloseDropdown:t=>{const e=(0,o.getContext)(),{ref:n}=(0,o.getElement)();!n.contains(t.target)&&e.isDropdown&&(e.isDropdownOpen=!1)},scrollSmoothly:t=>{const e=(0,o.getContext)(),{section:n}=e,{key:c}=n;t.preventDefault();const r=document.getElementById(c);r&&(r.scrollIntoView({behavior:"smooth"},!0),window.history.pushState(null,null,`#${c}`))},initWatchForSectionScroll:()=>{const t=(0,o.getContext)(),{highlightCurrentSection:e}=t;!0===e&&(c.enableWatchForSectionScroll=!0)},watchForCurrentSection:()=>{const t=(0,o.getContext)();if(!c.enableWatchForSectionScroll&&!t.highlightCurrentSection)return;console.log("watchForCurrentSection::",c,{...t});const{key:e}=t.section,{currentSection:n}=c;t.section.is_active=e===n},watchForSectionScroll:()=>{if(!c.enableWatchForSectionScroll)return;const{ref:t}=(0,o.getElement)(),{id:e}=(0,o.getContext)(),n=window.scrollY,r=t.offsetTop,s=t.offsetHeight;n>=r&&n<=r+s&&(c.currentSection=e)}}});var r,s;
//# sourceMappingURL=view.js.map