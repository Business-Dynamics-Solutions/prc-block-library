(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,i=window.wp.element,n=window.wp.data,r=window.wp.i18n,c=window.wp.blockEditor,o=window.wp.components,s=window.ReactJSXRuntime;function a({attributes:e,setAttributes:t,clientId:a,context:l}){const{isInteractive:p,interactiveNamespace:u,interactiveSubsumption:b}=e,d=u||l?.interactiveNamespace,{interactiveNamespaceOptions:h}=(0,n.useSelect)((e=>{const{getBlockParents:t,getBlock:i}=e("core/block-editor"),{getBlockSupport:n}=e("core/blocks"),r=t(a),c=[];return r.forEach((e=>{const t=i(e).name;n(t,"interactivity")&&(c.includes(t)||c.push(t))})),{interactiveNamespaceOptions:c.map((e=>({value:e,label:e})))}}));return(0,s.jsx)(c.InspectorControls,{children:(0,s.jsxs)(o.PanelBody,{title:(0,r.__)("Interactivity API"),children:[(0,s.jsx)(o.ToggleControl,{label:(0,r.__)("Interactive","prc-block-library"),checked:p,onChange:()=>t({isInteractive:!p}),help:(0,r.__)("When enabled, this block leverages the @wordpress/interactivity API.","prc-block-library")}),p&&(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(o.ToggleControl,{label:(0,r.__)("Subsumption","prc-block-library"),checked:b,onChange:()=>t({interactiveSubsumption:!b}),help:(0,r.__)("When enabled, this block will inherit interactivity directly from its parent rather than any given namespace.","prc-block-library")}),!b&&(0,s.jsx)(o.SelectControl,{label:(0,r.__)("Namespace","prc-block-library"),value:d,options:h,onChange:e=>t({interactiveNamespace:e}),help:(0,r.__)("The namespace serves as a unique identifier for this blocks interactivity context, ensuring that interactions are confined within the scope of this block to its parent.","prc-block-library")})]}),(0,s.jsx)(o.ExternalLink,{href:"https://developer.wordpress.org/block-editor/reference-guides/interactivity-api/api-reference/",children:"API documentation"})]})})}function l({attributes:e,setAttributes:t,clientId:i,context:n}){return(0,s.jsx)(a,{attributes:e,setAttributes:t,clientId:i,context:n})}const p="prc-block/interactivity-api";(0,e.addFilter)("editor.BlockEdit",`${p}-controls`,(0,t.createHigherOrderComponent)((e=>function(t){const{name:r,attributes:c,setAttributes:o,clientId:a,isSelected:p,context:u}=t;return(0,n.useSelect)((e=>e("core/blocks").getBlockSupport(r,"interactivity")),[r])&&p?(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(e,{...t}),(0,s.jsx)(l,{attributes:c,setAttributes:o,clientId:a,context:u})]}):(0,s.jsx)(e,{...t})}),"withPRCBlockInteractivityAPIControls"),100),(0,e.addFilter)("blocks.registerBlockType",`${p}-supports`,(e=>(e?.supports?.interactivity&&(e.attributes={...e.attributes,isInteractive:{type:"boolean",default:!1},interactiveNamespace:{type:"string"},interactiveSubsumption:{type:"boolean",default:!1}},e.usesContext=[...e.usesContext,"interactiveNamespace"]),e)),100)})();