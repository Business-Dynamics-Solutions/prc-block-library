(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,i=window.wp.element,n=window.wp.data,c=window.prcIcons,o=window.wp.i18n,r=window.wp.blockEditor,s=window.wp.components,a=window.ReactJSXRuntime;function l({attributes:e,setAttributes:t,clientId:i,context:l}){const{interactiveNamespace:p,interactiveSubsumption:u}=e,d=p||l?.interactiveNamespace,{interactiveNamespaceOptions:b,defaultNamespace:h}=(0,n.useSelect)((e=>{const{getBlockParents:t,getBlock:n}=e("core/block-editor"),{getBlockSupport:c}=e("core/blocks"),o=t(i),r=[];o.forEach((e=>{const t=n(e).name;c(t,"interactivity")&&(r.includes(t)||r.push(t))}));const s=[{value:null,label:"None"},...r.map((e=>({value:e,label:e})))];return{interactiveNamespaceOptions:s,defaultNamespace:s[0]?.value}}),[i]);return(0,a.jsx)(r.InspectorControls,{children:(0,a.jsx)(s.PanelBody,{title:(0,o.__)("Interactivity API"),initialOpen:!1,buttonProps:{isDestructive:d?.length>0||u,icon:(0,a.jsx)("div",{style:{paddingLeft:"0.25em",color:"inherit"},children:(0,a.jsx)(c.Icon,{icon:"plug-circle-bolt",size:"1em"})})},children:(0,a.jsxs)("div",{children:[(0,a.jsx)(s.ToggleControl,{label:(0,o.__)("Subsumption","prc-block-library"),checked:u,onChange:()=>t({interactiveSubsumption:!u}),help:(0,o.__)("When enabled, this block will inherit primitives like name, value, and type directly. This is useful for blocks that are used inside interactive templates (<template/>).","prc-block-library")}),(0,a.jsx)(s.SelectControl,{label:(0,o.__)("Target Namespace","prc-block-library"),value:d,options:b,onChange:e=>t({interactiveNamespace:e}),help:(0,o.__)("The target namespace uniquely identifies this block's interactivity context, ensuring interactions remain within the block and its parent. You can see parent blocks that support interactivity, which this block can \"hook\" into. If you don't see the desired namespace, it means the parent block does not support interactivity.","prc-block-library")}),(0,a.jsx)(s.ExternalLink,{href:"https://developer.wordpress.org/block-editor/reference-guides/interactivity-api/api-reference/",children:"API documentation"})]})})})}function p({attributes:e,setAttributes:t,clientId:i,context:n}){return(0,a.jsx)(l,{attributes:e,setAttributes:t,clientId:i,context:n})}const u="prc-block/interactivity-api";(0,e.addFilter)("editor.BlockEdit",`${u}-controls`,(0,t.createHigherOrderComponent)((e=>function(t){const{name:c,attributes:o,setAttributes:r,clientId:s,isSelected:l,context:u}=t;return(0,n.useSelect)((e=>e("core/blocks").getBlockSupport(c,"interactivity")),[c])&&l?(0,a.jsxs)(i.Fragment,{children:[(0,a.jsx)(e,{...t}),(0,a.jsx)(p,{attributes:o,setAttributes:r,clientId:s,context:u})]}):(0,a.jsx)(e,{...t})}),"withPRCBlockInteractivityAPIControls"),100),(0,e.addFilter)("blocks.registerBlockType",`${u}-supports`,(e=>(e?.supports?.interactivity&&(e.attributes={...e.attributes,interactiveNamespace:{type:"string"},interactiveSubsumption:{type:"boolean",default:!1}},e.usesContext=[...e.usesContext,"interactiveNamespace"]),e)),100)})();
//# sourceMappingURL=index.js.map