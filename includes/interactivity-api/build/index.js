(()=>{"use strict";const e=window.wp.hooks,t=window.wp.compose,i=window.wp.element,n=window.wp.data,r=window.wp.i18n,c=window.wp.blockEditor,a=window.wp.components,o=window.ReactJSXRuntime;function s({attributes:e,setAttributes:t,clientId:s,context:l}){const{isInteractive:p,interactiveNamespace:u,interactiveSubsumption:d}=e,b=u||l?.interactiveNamespace,{interactiveNamespaceOptions:h,defaultNamespace:v}=(0,n.useSelect)((e=>{const{getBlockParents:t,getBlock:i}=e("core/block-editor"),{getBlockSupport:n}=e("core/blocks"),r=t(s),c=[];r.forEach((e=>{const t=i(e).name;n(t,"interactivity")&&(c.includes(t)||c.push(t))}));const a=c.map((e=>({value:e,label:e})));return{interactiveNamespaceOptions:a,defaultNamespace:a[0]?.value}}));return(0,i.useEffect)((()=>{p&&!b&&v?t({interactiveNamespace:v}):!p&&b&&t({interactiveNamespace:null})}),[p,b,v,t]),(0,o.jsx)(c.InspectorControls,{children:(0,o.jsxs)(a.PanelBody,{title:(0,r.__)("Interactivity API"),children:[(0,o.jsx)(a.ToggleControl,{label:(0,r.__)("Interactive","prc-block-library"),checked:p,onChange:()=>t({isInteractive:!p}),help:(0,r.__)("When enabled, this block leverages the @wordpress/interactivity API.","prc-block-library")}),p&&(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(a.ToggleControl,{label:(0,r.__)("Subsumption","prc-block-library"),checked:d,onChange:()=>t({interactiveSubsumption:!d}),help:(0,r.__)("When enabled, this block will inherit interactivity directly from its parent rather than any given namespace.","prc-block-library")}),!d&&(0,o.jsx)(a.SelectControl,{label:(0,r.__)("Namespace","prc-block-library"),value:b,options:h,onChange:e=>t({interactiveNamespace:e}),help:(0,r.__)("The namespace serves as a unique identifier for this blocks interactivity context, ensuring that interactions are confined within the scope of this block to its parent.","prc-block-library")})]}),(0,o.jsx)(a.ExternalLink,{href:"https://developer.wordpress.org/block-editor/reference-guides/interactivity-api/api-reference/",children:"API documentation"})]})})}function l({attributes:e,setAttributes:t,clientId:i,context:n}){return(0,o.jsx)(s,{attributes:e,setAttributes:t,clientId:i,context:n})}const p="prc-block/interactivity-api";(0,e.addFilter)("editor.BlockEdit",`${p}-controls`,(0,t.createHigherOrderComponent)((e=>function(t){const{name:r,attributes:c,setAttributes:a,clientId:s,isSelected:p,context:u}=t;return(0,n.useSelect)((e=>e("core/blocks").getBlockSupport(r,"interactivity")),[r])&&p?(0,o.jsxs)(i.Fragment,{children:[(0,o.jsx)(e,{...t}),(0,o.jsx)(l,{attributes:c,setAttributes:a,clientId:s,context:u})]}):(0,o.jsx)(e,{...t})}),"withPRCBlockInteractivityAPIControls"),100),(0,e.addFilter)("blocks.registerBlockType",`${p}-supports`,(e=>(e?.supports?.interactivity&&(e.attributes={...e.attributes,isInteractive:{type:"boolean",default:!1},interactiveNamespace:{type:"string"},interactiveSubsumption:{type:"boolean",default:!1}},e.usesContext=[...e.usesContext,"interactiveNamespace"]),e)),100)})();