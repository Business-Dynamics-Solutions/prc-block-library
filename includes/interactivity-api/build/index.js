(()=>{"use strict";const t=window.wp.hooks,e=window.wp.compose,i=window.wp.element,n=window.wp.data,r=window.wp.i18n,c=window.wp.blockEditor,o=window.wp.components,s=window.ReactJSXRuntime;function a({attributes:t,setAttributes:e,clientId:n,context:a}){const{isInteractive:l,interactiveNamespace:p,interactiveSubsumption:b}=t,d=p||a?.interactiveNamespace;return(0,s.jsx)(c.InspectorControls,{children:(0,s.jsxs)(o.PanelBody,{title:(0,r.__)("Interactivity API"),children:[(0,s.jsx)(o.ToggleControl,{label:(0,r.__)("Interactive","prc-block-library"),checked:l,onChange:()=>e({isInteractive:!l}),help:(0,r.__)("When enabled, this block leverages the @wordpress/interactivity API.","prc-block-library")}),l&&(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(o.ToggleControl,{label:(0,r.__)("Subsumption","prc-block-library"),checked:b,onChange:()=>e({interactiveSubsumption:!b}),help:(0,r.__)("When enabled, this block will inherit interactivity directly from its parent rather than any given namespace.","prc-block-library")}),!b&&(0,s.jsx)(o.TextControl,{label:(0,r.__)("Namespace","prc-block-library"),value:d,onChange:t=>e({interactiveNamespace:t}),help:(0,r.__)("The namespace serves as a unique identifier for this blocks interactivity context, ensuring that interactions are confined within the scope of this block to its parent.","prc-block-library")})]}),(0,s.jsx)(o.ExternalLink,{href:"https://developer.wordpress.org/block-editor/reference-guides/interactivity-api/api-reference/",children:"API documentation"})]})})}function l({attributes:t,setAttributes:e,clientId:i,context:n}){return(0,s.jsx)(a,{attributes:t,setAttributes:e,clientId:i,context:n})}const p="prc-block/interactivity-api";(0,t.addFilter)("editor.BlockEdit",`${p}-controls`,(0,e.createHigherOrderComponent)((t=>function(e){const{name:r,attributes:c,setAttributes:o,clientId:a,isSelected:p,context:b}=e;return(0,n.useSelect)((t=>t("core/blocks").getBlockSupport(r,"interactivity")),[r])&&p?(0,s.jsxs)(i.Fragment,{children:[(0,s.jsx)(t,{...e}),(0,s.jsx)(l,{attributes:c,setAttributes:o,clientId:a,context:b})]}):(0,s.jsx)(t,{...e})}),"withPRCBlockInteractivityAPIControls"),100),(0,t.addFilter)("blocks.registerBlockType",`${p}-supports`,(t=>(t?.supports?.interactivity&&(t.attributes={...t.attributes,isInteractive:{type:"boolean",default:!1},interactiveNamespace:{type:"string"},interactiveSubsumption:{type:"boolean",default:!1}},t.usesContext=[...t.usesContext,"interactiveNamespace"]),t)),100)})();